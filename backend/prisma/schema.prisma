generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum LogLevel {
  TRACE
  DEBUG
  INFO
  WARN
  ERROR
  FATAL
}

model Log {
  id        Int      @id @default(autoincrement())
  level     LogLevel
  message   String   @db.Text
  details   Json?    @db.JsonB
  timestamp DateTime @default(now()) @db.Timestamptz(3)
}

model Account {
  id             Int      @id @default(autoincrement())
  name           String   @unique @db.VarChar(50)
  defaultBalance Decimal  @default(0) @db.Decimal(15, 2)
  records        Record[]
}

enum RecordType {
  INCOME
  EXPENSE
}

model Record {
  id        BigInt     @id @default(autoincrement())
  type      RecordType
  accountId Int
  account   Account    @relation(fields: [accountId], references: [id])
  amount    Decimal    @db.Decimal(15, 2)
  date      DateTime   @db.Timestamptz(2)
}
